## 有线局域网/以太网（LAN）:
标准：IEEE 802.3、不要求数据链路层（有线链路）实现可靠传输

以太网协议:CSMA/CD处理 集线器 碰撞
检测和处理碰撞方法：多点接入，载波监听，碰撞检测。
检测和处理后的发送：先听后发，边听变发，延迟重发。

现代以太网使用交换机+全双工链路，几乎无碰撞。

^

### **以太网帧：MAC帧**
帧的首部（14字节：有目的mac地址6字节，源mac地址6字节，类型2字节），数据载荷，fcs。

### **MAC地址（物理地址）：**
组成：48位6字节，00-0C-CF-93-8C-92
<br>
分类：
单播地址：一个地址
多播地址：主机加入多播组，多播组的地址为多播地址
广播地址：全为1,FF-FF-FF-FF-FF-FF。当目的地址为这个时，表示广播到每一台主机
<br>
有单播地址的设备：
电子产品，蓝牙，适配器，交换机/路由器（有多个接口，每个接口中有一个MAC地址）
<br>
<br>
### **集线器(hub)：**
物理层多端口设备，将所有连接到它的设备组成一个共享的物理总线，常配合半双工双绞线构成（被淘汰）。
功能：工作在物理层，当一个设备通过集线器发送数据时，集线器会直接将数据包广播发送给所有其他连接的设备，而不考虑数据包的目标地址，这会造成数据传输冲突碰撞，遵循CSMA/CD协议可以处理减少冲突。
<br>
### **网桥：**
链路层能够连接多个网络或网络分段的设备，并能根据数据包的MAC目标地址进行智能转发的设备。
功能：工作在链路层，能检查数据包的目标地址，只将数据包转发到目标设备所在的网络，而不会像集线器一样简单地广播给所有设备，当然也可以使用广播帧进行主动广播。
优点：网桥可以帮助减少网络拥塞，提高网络性能。
### **交换机(switch)：**
交换机就是多接口的网桥。
功能：基于MAC地址对数据进行转发，用于内部网络。
优点：常使用全双工网线如光纤，用户独享宽带，缓存同时帧，减少碰撞，带宽率x2。即插即用，自学习纪录和维护MAC地址表。
MAC地址表：字段（MAC源地址+入口接口+有限时间）
<br>
桥接：交换机与交换机连接一起，会自动泛洪传输，只要泛洪广播来了MAC地址表就会记录，多个交换机的MAC表常常同时记录，当发送的目的地址在MAC表有纪录时就不会泛洪广播了。

桥接以太网交换机的生成树协议STP:
交换机桥接连接有网络环路会发送广播风暴，大量消耗网络资源。
最小生成树实现没有环路。
<br>
### **虚拟局域网VLAN：**
很多协议（ARP,RIP,DHCP）基于广播，而交换机桥接的网络巨大时，巨大的广播域会很难维护等问题，这时需要分割广播域。
1.路由器隔离：需要很多隔离而成本高。
2.虚拟局域网技术：将局域网中的设备划分为与物理位置无关的逻辑组。
<br>
**标签帧** ：
IEEE 802.1Q帧：交换机的端口对MAC帧的源MAC地址后面插入了4字节的VLAN标记（VID:12位，1~4094），称为打标签。
交换机 入出 端口会对原MAC帧进行**打标签**和**去标签**实现定向传输划分逻辑组。
<br>
**交换机端口默认VID**：
华为交换机把默认VLAN ID 称为：端口VLAN ID (PVID=1)。
思科交换机的端口在未配置VLAN ID时，默认属于VLAN1，思科把它成为本征VLAN，按照华为方式也是PVID=1。
<br>
**实现虚拟分组**：交换机的每一个端口只有一个PVID，进行修改这个PVID值，端口根据PVID值进行打标签，去标签，实现虚拟局域网分组。
<br>
**交换机端口类型**：Access，Trunk，Hybrid（思科交换机没有Hybrid端口，华为交换机有Hybrid端口）。
Access端口用于连接用户计算机。只能属于一个VLAN (通过入交换机打标签，出交换机去标签实现交换机内一VLAN)。
Trunk端口用于交换机之间，交换机与路由器之间。可以属于多个VLAN (通过出交换机打标签，入交换机去标签实现一线多VLAN)。
Hybrid端口华为交换机才有，混合了Trunk端口，Access端口功能。
<br> 
交换机还是有缺点：内部网络使用交换机一定量后。大网络下交换机的MAC表纪录不下来而会不停广播，这时需要路由器。

> 实际上，中小企业中，使用三层交换机架构，分别为接入层交换机、汇聚层交换机、核心交换机。
也有两层的，为接入层交换机和核心交换机。
其中核心交换机一般也有ip路由功能，实现不同vlan间通信。此时可以不用路由器。

^
### **路由器（网关）：**
工作在网络层，有着硬件、软件的网络设备。
功能：
1.隔离广播。
2.处理外部或不同网络之间的通信，基于IP地址的路由。
3.NAT（网络地址转换）、防火墙功能等
<br>
### 冲突域和广播域：
<https://blog.csdn.net/m0_67623521/article/details/129037495#:~:text=%E7%AD%94%E6%A1%88%E6%98%AF%EF%BC%9A2%E4%B8%AA%E5%B9%BF%E6%92%AD,%E5%9F%9F%EF%BC%8C7%E4%B8%AA%E5%86%B2%E7%AA%81%E5%9F%9F%E3%80%82>