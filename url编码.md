## **场景**

1. 放在 **URL 部分**（Path / Query String）
   → 必须按 URL 规则编码（空格变 %20、& 变 %26 …）。

2. 放在 **消息体**（Body）
   → 看 Content-Type 是什么：

   * `application/x-www-form-urlencoded`
     键和值都要做 URL 编码，和 Query String 的格式/规则完全一样。
   * `multipart/form-data`（上传文件或富表单）
     参数本身**不**再做 URL 编码，边界符之外的原始字节直接传。
   * `application/json` / `text/xml` …
     整个 payload 按对应格式序列化即可，**不**需要做 URL 编码。

3. 放在 **HTTP 头**（如自定义 Header）
   → 头值里出现特殊字符时，需按 HTTP 头规则编码（通常也是 URL 编码或百分号编码）。


## **url编码解码过程**
URL 编码并不是绝对必须的，有特殊字符会干扰 URL 结构时才需要URL编码。浏览器和一些请求发起工具会自动URL编码，有的则不会需要手动编码。
```
get请求:
浏览器输入框回车后自动url编码发起请求，确保特殊字符不会干扰 URL 结构。

post请求:
Content-Type = application/x-www-form-urlencoded时，浏览器会自动将请求体中参数url编码

后端接收:
一般后端如PHP接收参数会自动进行url解码，开发者直接使用即可。

在进行请求url转发开发时，为了确保特殊字符不会干扰 URL 结构，
此时可能需要开发者进行手动url编码。
```
## **url编码格式**
一般`—_.` 和数字 字母 外。
所有其他字符、汉字 都被替换成百分号（%）+两位十六进制数。
（汉字三字节，'汉':%e6 %b1 %89)
空格则编码为加号（+）。

常见url编码：
```
汉   %e6%b1%89
'      %27
“     %22
=    %3d
#    %23
%    %25
&    %26
 /    %2f
空格/+    %20
换行    %0a
制表符table %09
空字节    %00
+    %20  BP中用+代替
```
双编码：进行两次url编码
双解码：%2527 => ‘
只有 —_.  数字 字母 的参数，一般编码解码还是他本身。特殊也可以使用强编码进行编码。


目录穿越
```
/../
/.%00.%2F
包含 %00，这在文件路径中是不合法的。在大多数操作系统中，
空字符（null byte）用于表示字符串的结束，
如果这个字符串被错误地解释为文件路径，它实际上可能不会形成一个有效的路径。
```


