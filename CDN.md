CDN：内容分发网络。
>CDN可实现三类：镜像、高速缓存、专线。

将网站静态前端资源缓存，CDN有很多边缘地区结点，边缘缓存加速访问。  


## **使用CDN的好处：**
网站加CDN:一般需要到CDN商购买服务，将你的域名解析到CDN商(CDN 常常使用 CNAME 记录,将原始域名映射到 CDN 提供商)，CDN再转发到你的服务器，有一定隐藏你服务器ip的效果。

^
网站有CDN，访问网站优先走CDN离你近的结点的缓存，加速访问网站，网站源服务器压力也不会那么大。

^
CDN商一般也会提供对象存储服务，用于存储静态资源如图片，很多网站的上传文件功能也直接对接对象存储服务，把文件放在对象存储服务器，本服务器只存储文件的访问链接。

^
cc攻击：大量请求消耗大的接口
ddos：分布式拒绝服务攻击，大量请求网站

域名被ddos,cc攻击：上高防CDN，如免费的cf(外国的可能访问会慢)，国内收费cdn
ip被ddos,cc攻击：升级高防服务器，换一个ip，申请换一个高防ip一段时间，关闭对外访问一段时间等。



^
## **使用CDN可能遇到的问题：**
获取用户真实IP：
使用CDN，会用CDN的 IP 地址替换您用户的 IP 地址。如果站点运行的服务器配置不正确，这种情况经常发生，所有用户都将获得相同的 IP 地址，这也适用于机器人和黑客的IP。因此，锁定一个用户的IP可能会将导致其他所有人都被锁定。可以在Nginx设置中添加2行代码来获得用户的真实访问IP，通过代码识别IP来源并正确处理它们。
```
http{
set_real_ip_from 0.0.0.0/0;
real_ip_header X-Forwarded-For;
....
```

^
流量被盗刷：
没有开防盗链，导致流量被盗刷，资源被盗用。
>七牛云cdn流量免费10GB的CDN流量是不包含HTTPS流量的，如果文件是HTTPS地址，那是需要单独计费的。

