# **DHCP动态主机配置协议**
手动配置主机网络相关配置信息（IP地址,掩码，默认网关，DNS服务器）太低效，
尽管RARP在过去用于为无IP地址的设备分配地址。
现在都是基于udp广播，用DHCP协议动态为主机分配IP地址。
DHCP服务器端口67,DHCP客户端端口68。

1. DHCP客户 开机后自动启动DHCP程序 向DHCP服务器 广播 **DHCP发现报文**（源IP地址：0.0.0.0表明未分配IP,目的IP：255.255.255.255广播地址）

2. DHCP服务器 收到报文后，查看报文里面的MAC地址比对数据库，
根据ARP确保IP地址可用，有则广播发送**DHCP提供报文**（源IP:DHCP服务器IP,目的IP：255.255.255.255）提供IP租约

3. DHCP客户先ARP检测可用，再接受IP地址租约

4. DHCP服务器确认IP地址租约

5. 后期还可续约或随时解约

DHCP客户的主机广播DHCP发现报文不会被路由器转发，需将DHCP服务器的IP地址配置在该路由器中，改路由器才会单播转发给DHCP服务器。
<br>
<br>
<br>

