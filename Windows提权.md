## **Windows权限**
用户及组：system administrator user guest等
最高root 0：system
1-999：administrator
1000+：user

system可以操作注册表等，但有时没有命令执行cmd，和获取hash，需要降级到administrator

Windows系统内置了许多本地用户组，这些用户组本身都已经被赋予一些权限（permissions),它们具有管理本地计算机或访问本地资源的权限。只要用户账户加入到这些本地组内，这回用户账户也将具备该组所拥有的权限。
**0x01普通权限**
  默认情况下，系统为用户分了7个组，并给每个组赋予不同的操作权限，管理员组(Administrators)、高权限用户组(PowerUsers)、普通用户组(Users）、备份操作组(Backup Operators)、文件复制组(Replicator)、来宾用户组(Guests)，身份验证用户组(Ahthenticatedusers)其中备份操作组和文件复制组为维护系统而设置，平时不会被使用。
   管理员组拥有大部分的计算机操作权限(并不是全部)，能够随意修改删除所有文件和修改系统设置只有程序信任组(特殊权限）。
   再往下就是高权限用户组，这一部分用户也能做大部分事情，但是不能修改系统设置，不能运行一些涉及系统管理的程序。
  普通用户组则被系统拴在了自己的地盘里，不能处理其他用户的文件和运行涉及管理的程序等。来宾用户组的文件操作权限和普通用户组一样，但是无法执行更多的程序。
   身份验证用户组(Ahthenticatedusers)经过ms验证程序登录的用户均属于此组。

**0x02特殊权限**
   除了上面提到的7个默认权限分组，系统还存在一些特殊权限成员，这些成员是为了特殊用途而设置，分别是:SYSTEM(系统)、Trustedinstaller（信任程序模块）、Everyone(所有人）、CREATOROWNER(创建者)等，这些特殊成员不被任何内置用户组吸纳，属于完全独立出来的账户。真正拥有"完全访问权"的只有一个成员：SYSTEM。这个成员是系统产生的，真正拥有整台计算机管理权限的账户，一般的操作是无法获取与它等价的权限的。“所有人"权限与普通用户组权限差不多，它的存在是为了让用户能访问被标记为"公有"的文件，这也是一些程序正常运行需要的访问权限—一任何人都能正常访问被赋予"Everyone"权限的文件，包括来宾组成员。被标记为"创建者"权限的文件只有建立文件的那个用户才能访问，做到了一定程度的隐私保护。

但是，所有的文件访问权限均可以被管理员组用户和SYSTEM成员忽略，除非用户使用了NTFS加密。

无论是普通权限还是特殊权限，它们都可以"叠加"使用，“叠加"就是指多个权限共同使用，例如一个账户原本属于Users组，而后我们把他加入Administrators组在加入Trustedinstaller等权限提升，那么现在这个账户便同时拥有两个或多个权限身份，而不是用管理员权限去覆盖原来身份。权限叠加并不是没有意义的，在一些需要特定身份访问的场合，用户只有为自己设置了指定的身份才能访问，这个时候"叠加"的使用就能减轻一部分劳动量了。


## **提权方法**
MSF使用。
CS使用。
令牌窃取。
溢出漏洞。MS14-058
烂土豆溢出(MS16-075)，支持web服务用户提权system
甜土豆溢出

web用户权限或本地普通用户，提升到最高system(root)权限。
先WEB上的提权后本地用户的提权。

## **web服务用户使用CVE提权**
**信息收集：**
操作系统版本、漏洞补丁、位数，杀软防护、网络、当前权限等信息。
ver
systeminfo
whoami
netstat -ano
tasklist /svc    查看当前进程。杀毒进程。
>winserver2012居多，2008一般
>如果无法执行命令的话，可以尝试上手动传一个cmd.exe到可读写目录再调用执行。

**发现提权：**
用systeminfo或工具脚本提取补丁信息成json文件
如：
```
修补程序:         安装了 4 个修补程序。
                  [01]: KB5004331
                  [02]: KB5003791
                  [03]: KB5006670
                  [04]: KB5005699
```
再使用比对脚本（(WindowsVulnScan-master，Vulmap等），比对出还可能存在溢出权限提升cve漏洞。
补丁查漏洞在线查询http://i.hacking8.com/tiquan


**提权程序：**
找到提权cve对应的可执行文件
也可以使用自动化程序如：Ladon，CS，MSF，烂土豆。

