如何防御sql注入漏洞
1、在代码层面使用过滤函数正则表达式等对传入的参数进行一个过滤、检测、处理，使得传入的恶意数据无法按照预想方式执行
2、预编译sql语句
复杂的sql语句为了方便直接拼接不使用mybabits等orm框架，或mybatis使用${}而不是#{}可能造成sql注入。

php使用mysql_real_escape_string()函数字符串转义。
由于 PHP 中的 mysql_real_escape_string`函数在 PHP 7.0 中已被弃用，并且在 PHP 7.0.0 版本之后不再推荐使用，建议使用 PDO 或 mysqli 扩展中的参数化查询语句来替代（预编译）。


3、使用waf，安全狗，阿里云盾、网神、AF等waf进行防护
4、二次注入的防御，在数据库查询出来的时候，对特殊字符进行转义

5、orderby&like查询：（由于这两种不能预编译，所以需要过滤器或自定义过滤）

防御：能预编译的情况都做预编译，一些特殊无法做预编译的，则过滤用户可控的参数。