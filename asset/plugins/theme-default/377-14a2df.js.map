{"version":3,"file":"377-14a2df.js","mappings":"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","sources":["webpack://TopWritePlugins.theme-default/./src/scss/body.module.scss","webpack://TopWritePlugins.theme-default/./src/scss/summary.module.scss","webpack://TopWritePlugins.theme-default/./.topwrite/use-config.ts","webpack://TopWritePlugins.theme-default/./src/lib/use-part.tsx","webpack://TopWritePlugins.theme-default/./src/components/summary.tsx","webpack://TopWritePlugins.theme-default/./src/lib/use-sidebar.tsx","webpack://TopWritePlugins.theme-default/./src/components/sidebar.tsx","webpack://TopWritePlugins.theme-default/./src/scss/main.module.scss","webpack://TopWritePlugins.theme-default/./src/components/document.tsx","webpack://TopWritePlugins.theme-default/./src/components/body.tsx","webpack://TopWritePlugins.theme-default/./src/scss/head.module.scss","webpack://TopWritePlugins.theme-default/./src/components/versions.tsx","webpack://TopWritePlugins.theme-default/./src/components/header.tsx","webpack://TopWritePlugins.theme-default/./src/components/root.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"body\":\"body--e6d90264\",\"sidebar\":\"sidebar--d62a5a43\",\"content\":\"content--a2a9de5d\",\"copyright\":\"copyright--279849bd\",\"mask\":\"mask--b1370af8\",\"open\":\"open--798448dd\"};","// extracted by mini-css-extract-plugin\nexport default {\"summary\":\"summary--546b2185\",\"part\":\"part--02250743\",\"title\":\"title--a9bcaa6a\",\"item\":\"item--fceb9fa5\",\"whole\":\"whole--a3e99536\",\"space\":\"space--3c2a00f9\",\"text\":\"text--c27c735e\",\"selected\":\"selected--e13a3cab\",\"active\":\"active--639bb60a\",\"disabled\":\"disabled--ca448de7\",\"open\":\"open--ff31f380\"};","import { BaseConfig, Config, useBook } from 'topwrite';\r\nimport { Config as ConfigType } from './config';\r\n\r\ndeclare const PLUGIN_NAME: string;\r\n\r\ndeclare module 'topwrite' {\r\n    export interface HookContext {\r\n        getConfig(): BaseConfig<ConfigType>;\r\n    }\r\n}\r\n\r\nexport function getPluginConfig(config: Config): BaseConfig<ConfigType> {\r\n\r\n    const schema = require('../config.json');\r\n\r\n    return config.getPluginConfig(PLUGIN_NAME, schema);\r\n}\r\n\r\nexport default function useConfig() {\r\n    const { config } = useBook();\r\n\r\n    return getPluginConfig(config);\r\n};\r\n","import { createContext, PropsWithChildren, useContext } from 'react';\r\nimport { SummaryPart, useArticle, useBook } from 'topwrite';\r\n\r\nconst PartContext = createContext<SummaryPart | null>(null);\r\n\r\nexport const PartProvider = ({ children }: PropsWithChildren<any>) => {\r\n    const { summary } = useBook();\r\n    const article = useArticle();\r\n    const part = article ? summary.getArticlePart(article) : null;\r\n\r\n    return <PartContext.Provider value={part}>\r\n        {children}\r\n    </PartContext.Provider>;\r\n};\r\n\r\nexport default function usePart() {\r\n    const part = useContext(PartContext);\r\n\r\n    if (!part) {\r\n        throw new Error('Part not found');\r\n    }\r\n    return part;\r\n}\r\n","import { Catalog, CatalogProps, Link, useIntl } from 'topwrite';\r\nimport { useCallback } from 'react';\r\nimport style from '../scss/summary.module.scss';\r\nimport { BsCaretDownFill } from '@react-icons/all-files/bs/BsCaretDownFill';\r\nimport { BsCaretRightFill } from '@react-icons/all-files/bs/BsCaretRightFill';\r\nimport classNames from 'classnames';\r\nimport useConfig from '@@/use-config';\r\nimport usePart from '@/lib/use-part';\r\n\r\nconst Item: CatalogProps['itemComponent'] = ({\r\n    item,\r\n    active,\r\n    disabled,\r\n    open,\r\n    setOpen,\r\n    children\r\n}) => {\r\n    const handleSpaceClick = useCallback(() => {\r\n        if (children) {\r\n            setOpen(!open);\r\n        }\r\n    }, [open, children]);\r\n\r\n    return <li className={classNames({ [style.open]: open })}>\r\n        <div className={classNames(style.item, {\r\n            [style.active]: active,\r\n            [style.disabled]: disabled,\r\n        })}>\r\n            <div className={style.whole} />\r\n            <span className={style.space} onClick={handleSpaceClick}>\r\n                {children && (open ? <BsCaretDownFill size={12} /> : <BsCaretRightFill size={12} />)}\r\n            </span>\r\n            <Link className={style.text} to={item}>\r\n                {item.title}\r\n            </Link>\r\n        </div>\r\n        {children}\r\n    </li>;\r\n};\r\n\r\nconst Part: CatalogProps['partComponent'] = ({ part, children }) => {\r\n\r\n    const config = useConfig();\r\n    const intl = useIntl();\r\n\r\n    if (config.getValue('multiVersions')) {\r\n\r\n        const currentPart = usePart();\r\n\r\n        if (currentPart !== part) {\r\n            return null;\r\n        }\r\n\r\n        return <>{children}</>;\r\n    }\r\n\r\n    return <div className={style.part}>\r\n        <div className={style.title}>\r\n            {part.title || intl.formatMessage({ defaultMessage: '未命名分组' })}\r\n        </div>\r\n        {children}\r\n    </div>;\r\n};\r\n\r\nexport default function Summary() {\r\n\r\n    return <div className={style.summary}>\r\n        <Catalog\r\n            partComponent={Part}\r\n            itemComponent={Item}\r\n        />\r\n    </div>;\r\n}\r\n","import { createContext, ReactNode, useContext, useState } from 'react';\r\n\r\ninterface SidebarContentProps {\r\n    open: boolean;\r\n    setOpen: (open: boolean) => void;\r\n}\r\n\r\nexport const SidebarContext = createContext<SidebarContentProps | undefined>(undefined);\r\n\r\ninterface Props {\r\n    readonly children: ReactNode;\r\n}\r\n\r\nexport function SidebarProvider({ children }: Props) {\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    return <SidebarContext.Provider value={{ open, setOpen }}>\r\n        {children}\r\n    </SidebarContext.Provider>;\r\n}\r\n\r\nexport function useSidebar() {\r\n    const context = useContext(SidebarContext);\r\n\r\n    if (!context) {\r\n        throw new Error();\r\n    }\r\n\r\n    return context;\r\n}\r\n","import style from '../scss/body.module.scss';\r\nimport Summary from '@/components/summary';\r\nimport { PoweredBy } from 'topwrite';\r\nimport { useSidebar } from '@/lib/use-sidebar';\r\nimport classNames from 'classnames';\r\n\r\nexport default function Sidebar() {\r\n\r\n    const { setOpen, open } = useSidebar();\r\n\r\n    return <>\r\n        <div className={classNames(style.sidebar, {\r\n            [style.open]: open\r\n        })}>\r\n            <div className={style.content}>\r\n                <Summary />\r\n                <PoweredBy className={style.copyright} />\r\n            </div>\r\n        </div>\r\n        {open && <div onClick={() => setOpen(false)} className={style.mask} />}\r\n    </>;\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"main\":\"main--300234d9\",\"toolbar\":\"toolbar--c6e9d40f\",\"content\":\"content--248c2438\",\"navigation\":\"navigation--55b5110c\",\"prev\":\"prev--68df3e1b\",\"next\":\"next--d30fbc10\"};","import { Article, Link, useIntl, useNextArticle, usePrevArticle } from 'topwrite';\r\nimport style from '../scss/main.module.scss';\r\n\r\nexport default function Document() {\r\n\r\n    const intl = useIntl();\r\n\r\n    const prevArticle = usePrevArticle();\r\n    const nextArticle = useNextArticle();\r\n\r\n    return <div className={style.main}>\r\n        <Article\r\n            offset={56}\r\n            className={style.content}\r\n            footer={\r\n                <div className={style.navigation}>\r\n                    {prevArticle && <span className={style.prev}>\r\n                        {intl.formatMessage({ defaultMessage: '上一篇' })}:<Link\r\n                        to={prevArticle}>{prevArticle.title}</Link>\r\n                    </span>}\r\n                    {nextArticle && <span className={style.next}>\r\n                        {intl.formatMessage({ defaultMessage: '下一篇' })}:<Link\r\n                        to={nextArticle}>{nextArticle.title}</Link>\r\n                    </span>}\r\n                </div>}\r\n        />\r\n    </div>;\r\n}\r\n","import style from '../scss/body.module.scss';\r\nimport Sidebar from '@/components/sidebar';\r\nimport Document from '@/components/document';\r\n\r\nexport default function Body() {\r\n    return <div className={style.body}>\r\n        <Sidebar />\r\n        <Document />\r\n    </div>;\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"head\":\"head--2d90da76\",\"menu\":\"menu--78e485c4\",\"title\":\"title--41373e3a\",\"navs\":\"navs--c9283e9a\",\"search\":\"search--98200a19\"};","import Dropdown from 'rc-dropdown';\r\nimport 'rc-dropdown/assets/index.css';\r\nimport usePart from '@/lib/use-part';\r\nimport { history, styled, SummaryArticle, useBook, useFile, useIntl } from 'topwrite';\r\nimport { VscChevronDown } from '@react-icons/all-files/vsc/VscChevronDown';\r\nimport { VscChevronUp } from '@react-icons/all-files/vsc/VscChevronUp';\r\nimport { useState } from 'react';\r\n\r\nexport default function Versions() {\r\n    const intl = useIntl();\r\n    const currentPart = usePart();\r\n    const { summary } = useBook();\r\n    const [visible, setVisible] = useState(false);\r\n    const file = useFile();\r\n\r\n    if (summary.getParts().length <= 1) {\r\n        return null;\r\n    }\r\n\r\n    return <Dropdown\r\n        visible={visible}\r\n        onVisibleChange={setVisible}\r\n        trigger={['click']}\r\n        overlay={<Menu>\r\n            {summary.getParts().map((part, index) => {\r\n                return <MenuItem\r\n                    key={index}\r\n                    onClick={() => {\r\n                        const first = SummaryArticle.findArticle(part, article => !!article.getPath());\r\n                        if (first) {\r\n                            history.push(file.relative(first.getPath()));\r\n                            setVisible(false);\r\n                        }\r\n                    }}\r\n                >\r\n                    {part.title || intl.formatMessage({ defaultMessage: '未命名分组' })}\r\n                </MenuItem>;\r\n            })}\r\n        </Menu>}\r\n        align={{\r\n            offset: [-3, -10]\r\n        }}\r\n    >\r\n        <Button>\r\n            <span>{currentPart.title || intl.formatMessage({ defaultMessage: '未命名分组' })}</span>\r\n            {visible ? <VscChevronUp /> : <VscChevronDown />}\r\n        </Button>\r\n    </Dropdown>;\r\n}\r\n\r\nconst MenuItem = styled.div`\r\n  padding: 4px 8px;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n  font-size: 15px;\r\n\r\n  &:not(:last-child) {\r\n    margin-bottom: 4px;\r\n  }\r\n\r\n  &:hover {\r\n    background-color: #f2f2f2;\r\n  }\r\n`;\r\n\r\nconst Menu = styled.div`\r\n  background: #fff;\r\n  padding: 8px 4px;\r\n  max-height: 150px;\r\n  max-width: 200px;\r\n  min-width: 150px;\r\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.05);\r\n  border: 1px solid #eaeaea;\r\n  overflow-y: auto;\r\n  border-radius: 5px;\r\n`;\r\n\r\nconst Button = styled.div`\r\n  display: flex;\r\n  margin-left: 12px;\r\n  align-items: center;\r\n  gap: 8px;\r\n  cursor: pointer;\r\n  font-size: 15px;\r\n\r\n  span {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  svg {\r\n    flex-shrink: 0;\r\n  }\r\n\r\n  @media (max-width: 996px) {\r\n    max-width: 100px;\r\n    overflow: hidden;\r\n    margin-left: auto;\r\n  }\r\n`;\r\n","import style from '../scss/head.module.scss';\r\nimport { Link, Logo, NavLink, Search, useFile, useThemeConfig, useTitle, useWindowSize } from 'topwrite';\r\nimport useConfig from '@@/use-config';\r\nimport { BsList } from '@react-icons/all-files/bs/BsList';\r\nimport { useSidebar } from '@/lib/use-sidebar';\r\nimport { useEffect } from 'react';\r\nimport Versions from '@/components/versions';\r\n\r\nexport default function Header() {\r\n\r\n    const title = useTitle();\r\n    const file = useFile();\r\n    const config = useConfig();\r\n    const themeConfig = useThemeConfig();\r\n\r\n    const windowSize = useWindowSize();\r\n\r\n    const { setOpen, open } = useSidebar();\r\n\r\n    useEffect(() => {\r\n        setOpen(false);\r\n    }, [windowSize, file.path]);\r\n\r\n    return <div className={style.head}>\r\n        {windowSize == 'mobile' && <div onClick={() => setOpen(!open)} className={style.menu}>\r\n            <BsList />\r\n        </div>}\r\n        <Link className={style.title} to='.'>\r\n            <Logo />\r\n            <span>{title}</span>\r\n        </Link>\r\n        {config.getValue('multiVersions') && <Versions />}\r\n        <div className={style.navs}>\r\n            {windowSize == 'desktop' && themeConfig.navs.map((nav, index) => {\r\n                return <NavLink key={index} {...nav} />;\r\n            })}\r\n        </div>\r\n        <div className={style.search}>\r\n            <Search onlyCurrentPart={config.getValue('multiVersions')} />\r\n        </div>\r\n    </div>;\r\n}\r\n","import Body from '@/components/body';\r\nimport Header from '@/components/header';\r\nimport '../scss/root.scss';\r\nimport { history, LoadingBar, useArticle, useBook, useFile } from 'topwrite';\r\nimport { SidebarProvider } from '@/lib/use-sidebar';\r\nimport { PartProvider } from '@/lib/use-part';\r\nimport { useEffect } from 'react';\r\n\r\nexport default function Root() {\r\n\r\n    const file = useFile();\r\n    const { summary } = useBook();\r\n\r\n    const article = useArticle();\r\n\r\n    useEffect(() => {\r\n        if (!article) {\r\n            const firstPath = summary.getFirstPath();\r\n            if (firstPath) {\r\n                history.replace(file.relative(firstPath));\r\n            }\r\n        }\r\n    }, [article]);\r\n\r\n    if (!article) {\r\n        return null;\r\n    }\r\n\r\n    return <SidebarProvider>\r\n        <LoadingBar />\r\n        <PartProvider>\r\n            <Header />\r\n            <Body />\r\n        </PartProvider>\r\n    </SidebarProvider>;\r\n}\r\n"],"names":["useConfig","config","schema","require","getPluginConfig","PLUGIN_NAME","useBook","PartContext","createContext","PartProvider","_ref","children","summary","article","useArticle","part","getArticlePart","_jsx","Provider","value","usePart","useContext","Error","Item","_classNames2","item","active","disabled","open","setOpen","handleSpaceClick","useCallback","_jsxs","className","classNames","_defineProperty","style","onClick","BsCaretDownFill","size","BsCaretRightFill","Link","to","title","Part","_ref2","intl","useIntl","getValue","_Fragment","formatMessage","id","defaultMessage","Summary","Catalog","partComponent","itemComponent","SidebarContext","undefined","SidebarProvider","_useState","useState","_useState2","_slicedToArray","useSidebar","context","Sidebar","_useSidebar","PoweredBy","Document","prevArticle","usePrevArticle","nextArticle","useNextArticle","Article","offset","footer","Body","Versions","currentPart","visible","setVisible","file","useFile","getParts","length","Dropdown","onVisibleChange","trigger","overlay","Menu","map","index","MenuItem","first","SummaryArticle","getPath","history","relative","align","Button","VscChevronUp","VscChevronDown","styled","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","Header","useTitle","themeConfig","useThemeConfig","windowSize","useWindowSize","useEffect","path","BsList","Logo","navs","nav","NavLink","_objectSpread","Search","onlyCurrentPart","Root","firstPath","getFirstPath","LoadingBar"],"sourceRoot":""}