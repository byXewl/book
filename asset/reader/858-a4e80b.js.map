{"version":3,"file":"858-a4e80b.js","mappings":"wPAAIA,E,kHACJ,SAASC,IAAiS,OAApRA,EAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcP,OAAOS,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,GAAU,CAAE,OAAOL,CAAQ,EAAUJ,EAASa,MAAMC,KAAMR,UAAY,CAElV,IAAIS,EAAW,SAAkBC,GAC/B,OAAoB,gBAAoB,MAAOhB,EAAS,CACtDiB,EAAG,cACHC,UAAW,OACXC,QAAS,gBACTC,MAAO,6BACP,OAAQ,KACRC,MAAO,MACPC,OAAQ,OACPN,GAAQjB,IAAUA,EAAqB,gBAAoB,OAAQ,CACpEwB,EAAG,2gBACH,OAAQ,QAEZ,E,6lBCAA,IAAMC,EAAW,SAAHC,GAAyD,IAA3CC,EAAOD,EAAPC,QAASC,EAAQF,EAARE,SAAUC,EAAOH,EAAPG,QACrCC,GAAOC,EAAAA,EAAAA,KAAA,KAAGF,QAASA,EAAOD,SAAGA,IAEnC,GAAID,EAAS,CACT,IAOIV,EAPEe,EAAsC,CACxCC,UAAW,OACXC,oBAAqB,SAACC,GAClB,OAAOA,EAAIC,eAAiBC,SAASC,IACzC,GAYJ,OAPIrB,EADmB,WAAnBsB,IAAOZ,IAAwBA,EAAQf,eAAe,WAC9Ce,EAEA,CACJa,QAASb,IAIVI,EAAAA,EAAAA,KAACU,EAAAA,EAAOC,EAAAA,EAAAA,EAAA,GACPV,GACAf,GAAK,IAAAW,SAERE,IAET,CAEA,OAAOA,CACX,EAOc,SAAUa,EAAIC,GAAyB,IAAtBzB,EAASyB,EAATzB,UAI3B,MAAa,YAFA0B,EAAAA,EAAAA,KAGF,MAGJC,EAAAA,EAAAA,MAACC,EAAS,CAAC5B,UAAWA,EAASS,SAAA,EAClCG,EAAAA,EAAAA,KAACiB,EAAS,KACVjB,EAAAA,EAAAA,KAACkB,EAAAA,GAAoB,CAACC,KAAM,iBAAkBC,UAAW1B,MAEjE,CAEA,IAAMsB,EAAYK,EAAAA,GAAAA,IAAUC,IAAAA,EAAAC,IAAA,kxBAsCtBN,EAAY,WAEd,IAAMO,GAAOC,EAAAA,EAAAA,MAEPC,GAAWC,EAAAA,EAAAA,cAAY,WACzB,IAAMC,EAAQtB,SAASuB,gBACnBC,EAAUF,EAAMG,WAAaH,EAAMI,WAAa,GAEhDF,EAAU,IACVG,OAAOC,SAAS,EAAGJ,EAAU,IAC7BK,WAAWT,EAAU,GAE7B,GAAG,IAIH,OAFkBU,EAAAA,EAAAA,KAEF,KACLpC,EAAAA,EAAAA,KAACN,EAAQ,CACZE,QAAS4B,EAAKa,cACV,CAAAC,GAAA,SAAEC,eAAgB,CAAF,yBAEpBzC,QAAS4B,EAAQ7B,UACpBG,EAAAA,EAAAA,KAACwC,EAAS,MAER,IACX,C,YChIAC,EAAOC,QAAwB,mBAAPC,KAAqBA,KAA6B,iBAAfA,IAAIC,O,+BCA/D,IAWMA,EAXFC,EAAS,EAAQ,OACjB9D,EAAQ,EAAQ,OAChB+D,EAAa,EAAQ,OACrBC,EAAgB,EAAQ,OACxBC,EAAa,EAAQ,OACrBC,EAAa,EAAQ,OACrBC,EAA0B,EAAQ,OAElCC,EAAWN,EAAOM,SAElBC,EAAO,WAAWC,KAAKL,IAAeD,KACpCH,EAAUC,EAAOF,IAAIC,QAAQU,MAAM,MACxB7E,OAAS,GAAmB,GAAdmE,EAAQ,KAAYA,EAAQ,GAAK,GAAmB,GAAdA,EAAQ,IAAyB,GAAdA,EAAQ,KAMhGH,EAAOC,QAAU,SAAUa,EAAWC,GACpC,IAAIC,EAAkBD,EAAa,EAAI,EACvC,OAAOJ,EAAO,SAAUM,EAASC,GAC/B,IAAIC,EAAYV,EAAwB1E,UAAUC,OAAQ,GAAKgF,EAC3DI,EAAKf,EAAWY,GAAWA,EAAUP,EAASO,GAC9CI,EAASF,EAAYX,EAAWzE,UAAWiF,GAAmB,GAC9DM,EAAWH,EAAY,WACzB7E,EAAM8E,EAAI7E,KAAM8E,EAClB,EAAID,EACJ,OAAOL,EAAaD,EAAUQ,EAAUJ,GAAWJ,EAAUQ,EAC/D,EAAIR,CACN,C,kBC9BA,IAAIS,EAAI,EAAQ,OACZnB,EAAS,EAAQ,OAGjBoB,EAFgB,EAAQ,MAEVC,CAAcrB,EAAOoB,aAAa,GAIpDD,EAAE,CAAEnB,QAAQ,EAAMxE,MAAM,EAAM8F,OAAQtB,EAAOoB,cAAgBA,GAAe,CAC1EA,YAAaA,G,kBCTf,IAAID,EAAI,EAAQ,OACZnB,EAAS,EAAQ,OAGjBV,EAFgB,EAAQ,MAEX+B,CAAcrB,EAAOV,YAAY,GAIlD6B,EAAE,CAAEnB,QAAQ,EAAMxE,MAAM,EAAM8F,OAAQtB,EAAOV,aAAeA,GAAc,CACxEA,WAAYA,G,kBCRd,EAAQ,OACR,EAAQ,M","sources":["webpack://@topwrite/reader/./src/images/gotop.svg","webpack://@topwrite/reader/./src/components/menu.tsx","webpack://@topwrite/reader/../node_modules/.pnpm/core-js@3.31.0/node_modules/core-js/internals/engine-is-bun.js","webpack://@topwrite/reader/../node_modules/.pnpm/core-js@3.31.0/node_modules/core-js/internals/schedulers-fix.js","webpack://@topwrite/reader/../node_modules/.pnpm/core-js@3.31.0/node_modules/core-js/modules/web.set-interval.js","webpack://@topwrite/reader/../node_modules/.pnpm/core-js@3.31.0/node_modules/core-js/modules/web.set-timeout.js","webpack://@topwrite/reader/../node_modules/.pnpm/core-js@3.31.0/node_modules/core-js/modules/web.timers.js"],"sourcesContent":["var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgGotop = function SvgGotop(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    t: 1656576930186,\n    className: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"p-id\": 2393,\n    width: \"1em\",\n    height: \"1em\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M484.538555 297.401434 78.508052 703.407378c-11.784394 11.813047-11.784394 30.912034 0 42.724057 11.81714 11.81407 30.94171 11.81407 42.757826 0l386.211109-386.181433 379.830795 379.806235c11.453866 11.482519 30.039153 11.482519 41.491996 0 11.511171-11.453866 11.511171-30.039153 0-41.516556L534.372543 303.776631c-1.543146-1.539053-3.417843-2.296299-5.200442-3.412726-0.691755-0.935302-1.055029-2.085498-1.933025-2.962471-11.784394-11.784394-30.912034-11.784394-42.695405 0L484.538555 297.401434zM484.538555 297.401434\",\n    \"p-id\": 2394\n  })));\n};\nexport { SvgGotop as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB0PSIxNjU2NTc2OTMwMTg2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIzOTMiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNDg0LjUzODU1NSAyOTcuNDAxNDM0IDc4LjUwODA1MiA3MDMuNDA3Mzc4Yy0xMS43ODQzOTQgMTEuODEzMDQ3LTExLjc4NDM5NCAzMC45MTIwMzQgMCA0Mi43MjQwNTcgMTEuODE3MTQgMTEuODE0MDcgMzAuOTQxNzEgMTEuODE0MDcgNDIuNzU3ODI2IDBsMzg2LjIxMTEwOS0zODYuMTgxNDMzIDM3OS44MzA3OTUgMzc5LjgwNjIzNWMxMS40NTM4NjYgMTEuNDgyNTE5IDMwLjAzOTE1MyAxMS40ODI1MTkgNDEuNDkxOTk2IDAgMTEuNTExMTcxLTExLjQ1Mzg2NiAxMS41MTExNzEtMzAuMDM5MTUzIDAtNDEuNTE2NTU2TDUzNC4zNzI1NDMgMzAzLjc3NjYzMWMtMS41NDMxNDYtMS41MzkwNTMtMy40MTc4NDMtMi4yOTYyOTktNS4yMDA0NDItMy40MTI3MjYtMC42OTE3NTUtMC45MzUzMDItMS4wNTUwMjktMi4wODU0OTgtMS45MzMwMjUtMi45NjI0NzEtMTEuNzg0Mzk0LTExLjc4NDM5NC0zMC45MTIwMzQtMTEuNzg0Mzk0LTQyLjY5NTQwNSAwTDQ4NC41Mzg1NTUgMjk3LjQwMTQzNHpNNDg0LjUzODU1NSAyOTcuNDAxNDM0IiBwLWlkPSIyMzk0Ij48L3BhdGg+PC9zdmc+DQo=\";","import { InjectedComponentSet, styled, useIntl } from '@topwrite/common';\nimport { ComponentProps, ReactNode, useCallback } from 'react';\nimport useWindowScroll from '../lib/use-window-scroll';\nimport { ReactComponent as GotopIcon } from '../images/gotop.svg';\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport useWindowSize from '../lib/use-window-size';\n\ntype TooltipProps = ComponentProps<typeof Tooltip>;\n\nexport interface MenuItemProps {\n    tooltip?: TooltipProps['overlay'] | TooltipProps;\n    children: ReactNode;\n    onClick?: () => void;\n}\n\nconst MenuItem = function({ tooltip, children, onClick }: MenuItemProps) {\n    const item = <a onClick={onClick}>{children}</a>;\n\n    if (tooltip) {\n        const defaultProps: Partial<TooltipProps> = {\n            placement: 'left',\n            getTooltipContainer: (dom) => {\n                return dom.parentElement || document.body;\n            }\n        };\n\n        let props: TooltipProps;\n        if (typeof tooltip === 'object' && tooltip.hasOwnProperty('overlay')) {\n            props = tooltip as TooltipProps;\n        } else {\n            props = {\n                overlay: tooltip as TooltipProps['overlay']\n            };\n        }\n\n        return <Tooltip\n            {...defaultProps}\n            {...props}\n        >\n            {item}\n        </Tooltip>;\n    }\n\n    return item;\n};\n\n\nexport interface MenuProps {\n    className?: string;\n}\n\nexport default function Menu({ className }: MenuProps) {\n\n    const size = useWindowSize();\n\n    if (size === 'mobile') {\n        return null;\n    }\n\n    return <Container className={className}>\n        <GotopItem />\n        <InjectedComponentSet role={'page:menu:item'} component={MenuItem} />\n    </Container>;\n}\n\nconst Container = styled.div`\n\n  position: fixed;\n  right: 24px;\n  bottom: 48px;\n  z-index: 400;\n  display: flex;\n  flex-direction: column-reverse;\n\n  a {\n    width: 42px;\n    height: 42px;\n    background: #FFFFFF;\n    box-shadow: 0 1px 4px -2px rgb(0 0 0 / 13%), 0 2px 8px rgb(0 0 0 / 8%), 0 8px 16px 4px rgb(0 0 0 / 4%);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    cursor: pointer;\n    margin-top: 16px;\n    color: #585a5a;\n\n    svg {\n      width: 20px;\n      height: 20px;\n      fill: currentColor;\n    }\n\n    html[data-theme=dark] & {\n      background-color: #1a1a1a;\n      color: #e8e8e8;\n      border: 1px solid rgba(235, 235, 235, 0.15);\n      box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.24);\n    }\n  }\n\n`;\n\nconst GotopItem = function() {\n\n    const intl = useIntl();\n\n    const scrollUp = useCallback(() => {\n        const frame = document.documentElement;\n        let pageTop = frame.scrollTop - (frame.clientTop || 0);\n\n        if (pageTop > 0) {\n            window.scrollTo(0, pageTop - 30);\n            setTimeout(scrollUp, 2);\n        }\n    }, []);\n\n    const scrollTop = useWindowScroll();\n\n    if (scrollTop > 500) {\n        return <MenuItem\n            tooltip={intl.formatMessage(\n                { defaultMessage: `回到顶部` }\n            )}\n            onClick={scrollUp}\n        ><GotopIcon /></MenuItem>;\n    }\n    return null;\n};\n","/* global Bun -- Deno case */\nmodule.exports = typeof Bun == 'function' && Bun && typeof Bun.version == 'string';\n","'use strict';\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar isCallable = require('../internals/is-callable');\nvar ENGINE_IS_BUN = require('../internals/engine-is-bun');\nvar USER_AGENT = require('../internals/engine-user-agent');\nvar arraySlice = require('../internals/array-slice');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar Function = global.Function;\n// dirty IE9- and Bun 0.3.0- checks\nvar WRAP = /MSIE .\\./.test(USER_AGENT) || ENGINE_IS_BUN && (function () {\n  var version = global.Bun.version.split('.');\n  return version.length < 3 || version[0] == 0 && (version[1] < 3 || version[1] == 3 && version[2] == 0);\n})();\n\n// IE9- / Bun 0.3.0- setTimeout / setInterval / setImmediate additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers\n// https://github.com/oven-sh/bun/issues/1633\nmodule.exports = function (scheduler, hasTimeArg) {\n  var firstParamIndex = hasTimeArg ? 2 : 1;\n  return WRAP ? function (handler, timeout /* , ...arguments */) {\n    var boundArgs = validateArgumentsLength(arguments.length, 1) > firstParamIndex;\n    var fn = isCallable(handler) ? handler : Function(handler);\n    var params = boundArgs ? arraySlice(arguments, firstParamIndex) : [];\n    var callback = boundArgs ? function () {\n      apply(fn, this, params);\n    } : fn;\n    return hasTimeArg ? scheduler(callback, timeout) : scheduler(callback);\n  } : scheduler;\n};\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar schedulersFix = require('../internals/schedulers-fix');\n\nvar setInterval = schedulersFix(global.setInterval, true);\n\n// Bun / IE9- setInterval additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-setinterval\n$({ global: true, bind: true, forced: global.setInterval !== setInterval }, {\n  setInterval: setInterval\n});\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar schedulersFix = require('../internals/schedulers-fix');\n\nvar setTimeout = schedulersFix(global.setTimeout, true);\n\n// Bun / IE9- setTimeout additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout\n$({ global: true, bind: true, forced: global.setTimeout !== setTimeout }, {\n  setTimeout: setTimeout\n});\n","// TODO: Remove this module from `core-js@4` since it's split to modules listed below\nrequire('../modules/web.set-interval');\nrequire('../modules/web.set-timeout');\n"],"names":["_path","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","SvgGotop","props","t","className","viewBox","xmlns","width","height","d","MenuItem","_ref","tooltip","children","onClick","item","_jsx","defaultProps","placement","getTooltipContainer","dom","parentElement","document","body","_typeof","overlay","Tooltip","_objectSpread","Menu","_ref2","useWindowSize","_jsxs","Container","GotopItem","InjectedComponentSet","role","component","styled","_templateObject","_taggedTemplateLiteral","intl","useIntl","scrollUp","useCallback","frame","documentElement","pageTop","scrollTop","clientTop","window","scrollTo","setTimeout","useWindowScroll","formatMessage","id","defaultMessage","GotopIcon","module","exports","Bun","version","global","isCallable","ENGINE_IS_BUN","USER_AGENT","arraySlice","validateArgumentsLength","Function","WRAP","test","split","scheduler","hasTimeArg","firstParamIndex","handler","timeout","boundArgs","fn","params","callback","$","setInterval","schedulersFix","forced"],"sourceRoot":""}