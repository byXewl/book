# **万维网WWW**
即网站和网站的规则协议，是互联网上的一种应用。 用户可以通过浏览器等工具可以访问和浏览这些资源。
基于超文本传输HTTP协议。
### **HTTP:**

#### **HTTP/1.0**
非持续链接方式，浏览器每次请求一个文件都要与服务器建立TCP连接，当收到响应后就立即关闭连接。
请求一个对象时间要花费两倍的RTT(往返时间)+文档传输时延。
```
TCP三次握手连接
HTTP请求报文
HTTP响应报文
TCP四次挥手断开连接
```
#### **HTTP/1.1**
可控制持续连接方式：
请求头的Connection值为keep-alive，万维网服务器在三次挥手后发送响应后任然保持这条连接，还可直接请求资源，无需再三次挥手。
Connection值为close，请求完一个资源则直接四次挥手。

^
#### **HTTP/2.0**
HTTP/2.0 是 HTTP 协议自 1999 年 HTTP 1.1 发布后的首个重大更新，它在 HTTP 1.x 的基础上做了许多重要的改进，主要包括：
1. **二进制分帧**：HTTP/2.0 采用二进制格式传输数据，而非 HTTP 1.x 的文本格式。这种二进制协议解析起来更高效，数据在“线上”更紧凑，错误更少。HTTP/2.0 中的数据通信最小单位是帧，消息由一个或多个帧组成，流是承载双向消息的虚拟通道，每个流都有一个唯一的整数ID 。
2. **多路复用**：HTTP/2.0 支持在单个连接上并行发送多个请求和响应，解决了 HTTP 1.x 中的队头阻塞问题。这意味着请求和响应可以在同一个 TCP 连接上交错进行，而不会相互干扰，极大地提高了性能 。
3. **头部压缩**：HTTP/2.0 引入了头部压缩机制，使用 HPACK 算法对头部信息进行压缩，减少了数据传输量，提高了传输效率 。
4. **服务器推送**：HTTP/2.0 允许服务器主动将数据推送到客户端缓存中，减少了请求延迟，提高了性能。服务器可以预测客户端可能需要的资源，并提前推送 。
5. **流量控制**：HTTP/2.0 引入了流量控制机制，确保只有接收者准备好接收的数据被发送，这有助于有效利用流的多路复用 。
6. **优化连接**：HTTP/2.0 优化了连接的建立过程，减少了连接建立的时间，提高了性能 。
7. **安全性**：HTTP/2.0 通常部署在 HTTPS 上，增加了协议的安全性。它通过 TLS 的扩展 ALPN 作为协议升级，并且禁用了数百种不再安全的加密算法。



**浏览器支持**：几乎所有现代浏览器都支持 HTTP/2.0，包括 Chrome、Firefox、Safari、Edge 等。对于旧版本的浏览器，服务器会回退到 HTTP/1.x 协议 。

**Nginx 实现**：Nginx 从版本 1.9.5 开始支持 HTTP/2.0。要在 Nginx 中启用 HTTP/2.0，你需要：

* 确保 Nginx 版本至少为 1.9.5。
* 启用 SSL/TLS 加密，因为 HTTP/2.0 需要使用 SSL/TLS。
* 在 Nginx 配置文件中添加 `listen 443 ssl http2;` 来启用 HTTP/2.0。
* 测试配置文件是否正确，并重启 Nginx 服务。
* 可以使用 `http2_push` 指令来利用服务器推送功能 。




^
#### **HTTP报文格式**
请求报文
```
请求行+回车换行
请求头部

请求体
```
响应报文
```
响应状态行+回车换行
响应头部

响应体
```
### **万维网缓存（Web缓存）:**
客户机缓存：浏览器缓存
中间服务器缓存：CDN
缓存可以设置一段时间过期，请求时先请求缓存，若缓存过期，则更新缓存。
过期但未改变：状态码304 Not Modified，更新过期时间。
过期且改变：原服务器给中间代理服务器响应更新内容，更新过期时间。
<br>
<br>
<br>

