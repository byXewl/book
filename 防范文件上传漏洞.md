## 防御方法

* 白名单判断文件后缀是否合法
* 文件上传的目录，设置为不可执行。只能访问查看。但有可能../../上传到上级解析脚本的目录则还是漏洞。
* 判断文件类型
* 使用随机数改写文件名和文件路径
* 单独设置文件服务器的域名
* 使用安全设备防御
* 使用对象云存储OSS，完成杜绝文件上传漏洞
    开通OSS
    新建Bucket
    配置Bucket属性
    配置Access访问
但会出现Accesskey泄露隐患。
如：前端，客户端直接使用AccessKeyId+AccessKeySecret连接OSS，造成泄露。