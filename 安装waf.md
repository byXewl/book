## **WAF类产品**
云锁(操作系统内核加固)、悬镜、安全狗、云盾、D盾(免费)、雷池。

### **1. 分类：**
**服务器型WAF**主要是保护服务器的安全，主要功能包括DDOS防火墙，ARP防火墙，web防火墙（抗CC），远程桌面守护，账号保护等。

^
**网站型WAF** 主要是保护网站的安全，主要功能包括网马挂马扫描及防护、SQL注入防护，CC攻击防护，资源保护等。

^
硬件型WAF：以硬件形式部署在链路种，在旁路监听时只纪录攻击，不拦截攻击。
产品：Imperva，天清WAG。

软件型WAF：以软件的形式安装在服务器上，直接检测和拦截。
产品：安全狗，云锁，D盾。

云WAF：一般以反向代理的形式工作，通过配置NS或CNAME记录。可以认为是带防护的CDN。
产品：阿里云云盾，腾讯云WAF、雷池。
^
### **2. 原理：**
一般工作于应用层。
WAF工作原理 WAF的工作原理主要分为
4个步骤：流量识别——>攻击检测——>攻击防御——>记录日志 
1）流量识别：识别来自客户端的HTTP请求，并对HTTP请求包进行解析。WAF可以检查请求头、请求体、Cookie、URL参数等信息，并识别其中的攻击。 
2）攻击检测：对识别的HTTP请求包进行攻击检测，匹配防御规则模块。WAF可以使用多种技术来检测攻击，例如正则表达式、特征匹配、行为分析等。WAF可以检测多种攻击，包括SQL注入、XSS、CSRF、命令注入等。 
3）攻击防御：WAF根据检测结果采取相应的措施，例如拦截请求、阻止访问、记录事件等。WAF可以使用多种技术来响应攻击，例如重定向、报错、拦截、返回 403 页面或者跳转到指定页面或者不返回任何数据，抑或拉黑IP。 
4）记录日志：WAF在处理的过程中会将拦截处理的日志记录下来，方便用户在后续中可以进行日志查看分析。


^
## **服务器安装安全狗云磐**
给服务器加免费的安全狗（自动拦截常见sql注入语句等）：
nginx1.22版本需要收费支持，需要联系商务购买定制版，或者卸载掉nginx手动编译一个不大于1.12版本的nginx。
<https://blog.csdn.net/weixin_50339323/article/details/120038743>
<https://blog.csdn.net/yyws2039725/article/details/107577355>
<http://fuyun.safedog.cn/serverCenter/bind_server_index.html>

1. 服务器安装运行安全狗程序，重启nginx（可选） 
2. 官网注册账号:<http://safedog.cn>
3. 登录这个管理后台与服务器对接配置 <http://fuyun.safedog.cn/serverCenter/bind_server_index.html>
4. 设置白名单，将自己ip设置成白名单等。
5.  最初安全狗管理后台可能会检测出宝塔的两个文件为病毒。

绕过安全狗：
<https://www.cnblogs.com/Xy--1/p/13873709.html>


^
## **反向代理版WAF雷池**
安装：<https://waf-ce.chaitin.cn/docs/guide/install>